syntax = "proto3";

package lumie;

option java_multiple_files = true;
option java_package = "com.lumie.grpc.exam";
option java_outer_classname = "ExamProto";

service ExamService {
  rpc GetExam(GetExamRequest) returns (ExamResponse);
  rpc GetExamResults(GetExamResultsRequest) returns (ExamResultListResponse);
  rpc GetStudentResults(GetStudentResultsRequest) returns (ExamResultListResponse);
}

message GetExamRequest {
  string tenant_slug = 1;
  int64 exam_id = 2;
}

message ExamResponse {
  int64 id = 1;
  string name = 2;
  string category = 3;
  int32 total_questions = 4;
  int32 total_possible_score = 5;
  int32 pass_score = 6;
  string created_at = 7;
  string updated_at = 8;
}

message GetExamResultsRequest {
  string tenant_slug = 1;
  int64 exam_id = 2;
  int32 page = 3;
  int32 size = 4;
}

message GetStudentResultsRequest {
  string tenant_slug = 1;
  int64 student_id = 2;
  int32 page = 3;
  int32 size = 4;
}

message ExamResultResponse {
  int64 id = 1;
  int64 exam_id = 2;
  string exam_name = 3;
  int64 student_id = 4;
  int32 total_score = 5;
  int32 grade = 6;
  int32 correct_count = 7;
  int32 incorrect_count = 8;
  string created_at = 9;
}

message ExamResultListResponse {
  repeated ExamResultResponse results = 1;
  int64 total_count = 2;
  int32 page = 3;
  int32 size = 4;
}
